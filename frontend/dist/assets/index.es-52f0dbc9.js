import{p as ne,r as Pe}from"./index-a1ba4589.js";var I={exports:{}},O=typeof Reflect=="object"?Reflect:null,$=O&&typeof O.apply=="function"?O.apply:function(t,n,o){return Function.prototype.apply.call(t,n,o)},P;O&&typeof O.ownKeys=="function"?P=O.ownKeys:Object.getOwnPropertySymbols?P=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:P=function(t){return Object.getOwnPropertyNames(t)};function xe(e){console&&console.warn&&console.warn(e)}var se=Number.isNaN||function(t){return t!==t};function h(){h.init.call(this)}I.exports=h;I.exports.once=De;h.EventEmitter=h;h.prototype._events=void 0;h.prototype._eventsCount=0;h.prototype._maxListeners=void 0;var V=10;function x(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(h,"defaultMaxListeners",{enumerable:!0,get:function(){return V},set:function(e){if(typeof e!="number"||e<0||se(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");V=e}});h.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};h.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||se(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function oe(e){return e._maxListeners===void 0?h.defaultMaxListeners:e._maxListeners}h.prototype.getMaxListeners=function(){return oe(this)};h.prototype.emit=function(t){for(var n=[],o=1;o<arguments.length;o++)n.push(arguments[o]);var i=t==="error",f=this._events;if(f!==void 0)i=i&&f.error===void 0;else if(!i)return!1;if(i){var a;if(n.length>0&&(a=n[0]),a instanceof Error)throw a;var l=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw l.context=a,l}var y=f[t];if(y===void 0)return!1;if(typeof y=="function")$(y,this,n);else for(var L=y.length,B=ce(y,L),o=0;o<L;++o)$(B[o],this,n);return!0};function ie(e,t,n,o){var i,f,a;if(x(n),f=e._events,f===void 0?(f=e._events=Object.create(null),e._eventsCount=0):(f.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),f=e._events),a=f[t]),a===void 0)a=f[t]=n,++e._eventsCount;else if(typeof a=="function"?a=f[t]=o?[n,a]:[a,n]:o?a.unshift(n):a.push(n),i=oe(e),i>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,xe(l)}return e}h.prototype.addListener=function(t,n){return ie(this,t,n,!1)};h.prototype.on=h.prototype.addListener;h.prototype.prependListener=function(t,n){return ie(this,t,n,!0)};function Be(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ae(e,t,n){var o={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=Be.bind(o);return i.listener=n,o.wrapFn=i,i}h.prototype.once=function(t,n){return x(n),this.on(t,ae(this,t,n)),this};h.prototype.prependOnceListener=function(t,n){return x(n),this.prependListener(t,ae(this,t,n)),this};h.prototype.removeListener=function(t,n){var o,i,f,a,l;if(x(n),i=this._events,i===void 0)return this;if(o=i[t],o===void 0)return this;if(o===n||o.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,o.listener||n));else if(typeof o!="function"){for(f=-1,a=o.length-1;a>=0;a--)if(o[a]===n||o[a].listener===n){l=o[a].listener,f=a;break}if(f<0)return this;f===0?o.shift():je(o,f),o.length===1&&(i[t]=o[0]),i.removeListener!==void 0&&this.emit("removeListener",t,l||n)}return this};h.prototype.off=h.prototype.removeListener;h.prototype.removeAllListeners=function(t){var n,o,i;if(o=this._events,o===void 0)return this;if(o.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):o[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete o[t]),this;if(arguments.length===0){var f=Object.keys(o),a;for(i=0;i<f.length;++i)a=f[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=o[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(t,n[i]);return this};function fe(e,t,n){var o=e._events;if(o===void 0)return[];var i=o[t];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?Ce(i):ce(i,i.length)}h.prototype.listeners=function(t){return fe(this,t,!0)};h.prototype.rawListeners=function(t){return fe(this,t,!1)};h.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):ue.call(e,t)};h.prototype.listenerCount=ue;function ue(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}h.prototype.eventNames=function(){return this._eventsCount>0?P(this._events):[]};function ce(e,t){for(var n=new Array(t),o=0;o<t;++o)n[o]=e[o];return n}function je(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function Ce(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function De(e,t){return new Promise(function(n,o){function i(a){e.removeListener(t,f),o(a)}function f(){typeof e.removeListener=="function"&&e.removeListener("error",i),n([].slice.call(arguments))}le(e,t,f,{once:!0}),t!=="error"&&Se(e,i,{once:!0})})}function Se(e,t,n){typeof e.on=="function"&&le(e,"error",t,n)}function le(e,t,n,o){if(typeof e.on=="function")o.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(f){o.once&&e.removeEventListener(t,i),n(f)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var he=I.exports;const ht=ne(he),Ne=e=>JSON.stringify(e,(t,n)=>typeof n=="bigint"?n.toString()+"n":n),Me=e=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=e.replace(t,'$1"$2n"$3');return JSON.parse(n,(o,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function Ie(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return Me(e)}catch{return e}}function k(e){return typeof e=="string"?e:Ne(e)||""}const Ue="PARSE_ERROR",Fe="INVALID_REQUEST",He="METHOD_NOT_FOUND",qe="INVALID_PARAMS",de="INTERNAL_ERROR",U="SERVER_ERROR",Je=[-32700,-32600,-32601,-32602,-32603],A={[Ue]:{code:-32700,message:"Parse error"},[Fe]:{code:-32600,message:"Invalid Request"},[He]:{code:-32601,message:"Method not found"},[qe]:{code:-32602,message:"Invalid params"},[de]:{code:-32603,message:"Internal error"},[U]:{code:-32e3,message:"Server error"}},pe=U;function $e(e){return Je.includes(e)}function G(e){return Object.keys(A).includes(e)?A[e]:A[pe]}function Ve(e){const t=Object.values(A).find(n=>n.code===e);return t||A[pe]}function ke(e,t,n){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${t}`):e}var Ge={},m={},z;function ze(){if(z)return m;z=1,Object.defineProperty(m,"__esModule",{value:!0}),m.isBrowserCryptoAvailable=m.getSubtleCrypto=m.getBrowerCrypto=void 0;function e(){return(globalThis==null?void 0:globalThis.crypto)||(globalThis==null?void 0:globalThis.msCrypto)||{}}m.getBrowerCrypto=e;function t(){const o=e();return o.subtle||o.webkitSubtle}m.getSubtleCrypto=t;function n(){return!!e()&&!!t()}return m.isBrowserCryptoAvailable=n,m}var w={},W;function We(){if(W)return w;W=1,Object.defineProperty(w,"__esModule",{value:!0}),w.isBrowser=w.isNode=w.isReactNative=void 0;function e(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}w.isReactNative=e;function t(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}w.isNode=t;function n(){return!e()&&!t()}return w.isBrowser=n,w}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Pe;t.__exportStar(ze(),e),t.__exportStar(We(),e)})(Ge);function ye(e=3){const t=Date.now()*Math.pow(10,e),n=Math.floor(Math.random()*Math.pow(10,e));return t+n}function dt(e=6){return BigInt(ye(e))}function pt(e,t,n){return{id:n||ye(),jsonrpc:"2.0",method:e,params:t}}function yt(e,t){return{id:e,jsonrpc:"2.0",result:t}}function Ke(e,t,n){return{id:e,jsonrpc:"2.0",error:Xe(t,n)}}function Xe(e,t){return typeof e>"u"?G(de):(typeof e=="string"&&(e=Object.assign(Object.assign({},G(U)),{message:e})),typeof t<"u"&&(e.data=t),$e(e.code)&&(e=Ve(e.code)),e)}class ve{}let vt=class extends ve{constructor(t){super()}};class Qe extends ve{constructor(){super()}}class gt extends Qe{constructor(t){super()}}const Ze="^https?:",Ye="^wss?:";function et(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(!(!t||!t.length))return t[0]}function be(e,t){const n=et(e);return typeof n>"u"?!1:new RegExp(t).test(n)}function K(e){return be(e,Ze)}function mt(e){return be(e,Ye)}function wt(e){return new RegExp("wss?://localhost(:d{2,5})?").test(e)}function ge(e){return typeof e=="object"&&"id"in e&&"jsonrpc"in e&&e.jsonrpc==="2.0"}function Et(e){return ge(e)&&"method"in e}function _t(e){return ge(e)&&(tt(e)||rt(e))}function tt(e){return"result"in e}function rt(e){return"error"in e}var M={exports:{}};(function(e,t){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof globalThis<"u"&&globalThis,o=function(){function f(){this.fetch=!1,this.DOMException=n.DOMException}return f.prototype=n,new f}();(function(f){(function(a){var l=typeof f<"u"&&f||typeof self<"u"&&self||typeof f<"u"&&f||{},y={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function L(r){return r&&DataView.prototype.isPrototypeOf(r)}if(y.arrayBuffer)var B=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],me=ArrayBuffer.isView||function(r){return r&&B.indexOf(Object.prototype.toString.call(r))>-1};function R(r){if(typeof r!="string"&&(r=String(r)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(r)||r==="")throw new TypeError('Invalid character in header field name: "'+r+'"');return r.toLowerCase()}function j(r){return typeof r!="string"&&(r=String(r)),r}function C(r){var s={next:function(){var u=r.shift();return{done:u===void 0,value:u}}};return y.iterable&&(s[Symbol.iterator]=function(){return s}),s}function v(r){this.map={},r instanceof v?r.forEach(function(s,u){this.append(u,s)},this):Array.isArray(r)?r.forEach(function(s){if(s.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+s.length);this.append(s[0],s[1])},this):r&&Object.getOwnPropertyNames(r).forEach(function(s){this.append(s,r[s])},this)}v.prototype.append=function(r,s){r=R(r),s=j(s);var u=this.map[r];this.map[r]=u?u+", "+s:s},v.prototype.delete=function(r){delete this.map[R(r)]},v.prototype.get=function(r){return r=R(r),this.has(r)?this.map[r]:null},v.prototype.has=function(r){return this.map.hasOwnProperty(R(r))},v.prototype.set=function(r,s){this.map[R(r)]=j(s)},v.prototype.forEach=function(r,s){for(var u in this.map)this.map.hasOwnProperty(u)&&r.call(s,this.map[u],u,this)},v.prototype.keys=function(){var r=[];return this.forEach(function(s,u){r.push(u)}),C(r)},v.prototype.values=function(){var r=[];return this.forEach(function(s){r.push(s)}),C(r)},v.prototype.entries=function(){var r=[];return this.forEach(function(s,u){r.push([u,s])}),C(r)},y.iterable&&(v.prototype[Symbol.iterator]=v.prototype.entries);function D(r){if(!r._noBody){if(r.bodyUsed)return Promise.reject(new TypeError("Already read"));r.bodyUsed=!0}}function F(r){return new Promise(function(s,u){r.onload=function(){s(r.result)},r.onerror=function(){u(r.error)}})}function we(r){var s=new FileReader,u=F(s);return s.readAsArrayBuffer(r),u}function Ee(r){var s=new FileReader,u=F(s),d=/charset=([A-Za-z0-9_-]+)/.exec(r.type),p=d?d[1]:"utf-8";return s.readAsText(r,p),u}function _e(r){for(var s=new Uint8Array(r),u=new Array(s.length),d=0;d<s.length;d++)u[d]=String.fromCharCode(s[d]);return u.join("")}function H(r){if(r.slice)return r.slice(0);var s=new Uint8Array(r.byteLength);return s.set(new Uint8Array(r)),s.buffer}function q(){return this.bodyUsed=!1,this._initBody=function(r){this.bodyUsed=this.bodyUsed,this._bodyInit=r,r?typeof r=="string"?this._bodyText=r:y.blob&&Blob.prototype.isPrototypeOf(r)?this._bodyBlob=r:y.formData&&FormData.prototype.isPrototypeOf(r)?this._bodyFormData=r:y.searchParams&&URLSearchParams.prototype.isPrototypeOf(r)?this._bodyText=r.toString():y.arrayBuffer&&y.blob&&L(r)?(this._bodyArrayBuffer=H(r.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):y.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(r)||me(r))?this._bodyArrayBuffer=H(r):this._bodyText=r=Object.prototype.toString.call(r):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof r=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y.searchParams&&URLSearchParams.prototype.isPrototypeOf(r)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y.blob&&(this.blob=function(){var r=D(this);if(r)return r;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var r=D(this);return r||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(y.blob)return this.blob().then(we);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var r=D(this);if(r)return r;if(this._bodyBlob)return Ee(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(_e(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y.formData&&(this.formData=function(){return this.text().then(Ae)}),this.json=function(){return this.text().then(JSON.parse)},this}var Re=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function Oe(r){var s=r.toUpperCase();return Re.indexOf(s)>-1?s:r}function E(r,s){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');s=s||{};var u=s.body;if(r instanceof E){if(r.bodyUsed)throw new TypeError("Already read");this.url=r.url,this.credentials=r.credentials,s.headers||(this.headers=new v(r.headers)),this.method=r.method,this.mode=r.mode,this.signal=r.signal,!u&&r._bodyInit!=null&&(u=r._bodyInit,r.bodyUsed=!0)}else this.url=String(r);if(this.credentials=s.credentials||this.credentials||"same-origin",(s.headers||!this.headers)&&(this.headers=new v(s.headers)),this.method=Oe(s.method||this.method||"GET"),this.mode=s.mode||this.mode||null,this.signal=s.signal||this.signal||function(){if("AbortController"in l){var c=new AbortController;return c.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&u)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(u),(this.method==="GET"||this.method==="HEAD")&&(s.cache==="no-store"||s.cache==="no-cache")){var d=/([?&])_=[^&]*/;if(d.test(this.url))this.url=this.url.replace(d,"$1_="+new Date().getTime());else{var p=/\?/;this.url+=(p.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})};function Ae(r){var s=new FormData;return r.trim().split("&").forEach(function(u){if(u){var d=u.split("="),p=d.shift().replace(/\+/g," "),c=d.join("=").replace(/\+/g," ");s.append(decodeURIComponent(p),decodeURIComponent(c))}}),s}function Le(r){var s=new v,u=r.replace(/\r?\n[\t ]+/g," ");return u.split("\r").map(function(d){return d.indexOf(`
`)===0?d.substr(1,d.length):d}).forEach(function(d){var p=d.split(":"),c=p.shift().trim();if(c){var T=p.join(":").trim();try{s.append(c,T)}catch(N){console.warn("Response "+N.message)}}}),s}q.call(E.prototype);function g(r,s){if(!(this instanceof g))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(s||(s={}),this.type="default",this.status=s.status===void 0?200:s.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=s.statusText===void 0?"":""+s.statusText,this.headers=new v(s.headers),this.url=s.url||"",this._initBody(r)}q.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new v(this.headers),url:this.url})},g.error=function(){var r=new g(null,{status:200,statusText:""});return r.ok=!1,r.status=0,r.type="error",r};var Te=[301,302,303,307,308];g.redirect=function(r,s){if(Te.indexOf(s)===-1)throw new RangeError("Invalid status code");return new g(null,{status:s,headers:{location:r}})},a.DOMException=l.DOMException;try{new a.DOMException}catch{a.DOMException=function(s,u){this.message=s,this.name=u;var d=Error(s);this.stack=d.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function S(r,s){return new Promise(function(u,d){var p=new E(r,s);if(p.signal&&p.signal.aborted)return d(new a.DOMException("Aborted","AbortError"));var c=new XMLHttpRequest;function T(){c.abort()}c.onload=function(){var b={statusText:c.statusText,headers:Le(c.getAllResponseHeaders()||"")};p.url.indexOf("file://")===0&&(c.status<200||c.status>599)?b.status=200:b.status=c.status,b.url="responseURL"in c?c.responseURL:b.headers.get("X-Request-URL");var _="response"in c?c.response:c.responseText;setTimeout(function(){u(new g(_,b))},0)},c.onerror=function(){setTimeout(function(){d(new TypeError("Network request failed"))},0)},c.ontimeout=function(){setTimeout(function(){d(new TypeError("Network request timed out"))},0)},c.onabort=function(){setTimeout(function(){d(new a.DOMException("Aborted","AbortError"))},0)};function N(b){try{return b===""&&l.location.href?l.location.href:b}catch{return b}}if(c.open(p.method,N(p.url),!0),p.credentials==="include"?c.withCredentials=!0:p.credentials==="omit"&&(c.withCredentials=!1),"responseType"in c&&(y.blob?c.responseType="blob":y.arrayBuffer&&(c.responseType="arraybuffer")),s&&typeof s.headers=="object"&&!(s.headers instanceof v||l.Headers&&s.headers instanceof l.Headers)){var J=[];Object.getOwnPropertyNames(s.headers).forEach(function(b){J.push(R(b)),c.setRequestHeader(b,j(s.headers[b]))}),p.headers.forEach(function(b,_){J.indexOf(_)===-1&&c.setRequestHeader(_,b)})}else p.headers.forEach(function(b,_){c.setRequestHeader(_,b)});p.signal&&(p.signal.addEventListener("abort",T),c.onreadystatechange=function(){c.readyState===4&&p.signal.removeEventListener("abort",T)}),c.send(typeof p._bodyInit>"u"?null:p._bodyInit)})}return S.polyfill=!0,l.fetch||(l.fetch=S,l.Headers=v,l.Request=E,l.Response=g),a.Headers=v,a.Request=E,a.Response=g,a.fetch=S,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(o),o.fetch.ponyfill=!0,delete o.fetch.polyfill;var i=n.fetch?n:o;t=i.fetch,t.default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t})(M,M.exports);var nt=M.exports;const X=ne(nt);var st=Object.defineProperty,ot=Object.defineProperties,it=Object.getOwnPropertyDescriptors,Q=Object.getOwnPropertySymbols,at=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable,Z=(e,t,n)=>t in e?st(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Y=(e,t)=>{for(var n in t||(t={}))at.call(t,n)&&Z(e,n,t[n]);if(Q)for(var n of Q(t))ft.call(t,n)&&Z(e,n,t[n]);return e},ee=(e,t)=>ot(e,it(t));const ut={Accept:"application/json","Content-Type":"application/json"},ct="POST",te={headers:ut,method:ct},re=10;class Rt{constructor(t,n=!1){if(this.url=t,this.disableProviderPing=n,this.events=new he.EventEmitter,this.isAvailable=!1,this.registering=!1,!K(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);this.url=t,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async open(t=this.url){await this.register(t)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(t){this.isAvailable||await this.register();try{const n=k(t),o=await(await X(this.url,ee(Y({},te),{body:n}))).json();this.onPayload({data:o})}catch(n){this.onError(t.id,n)}}async register(t=this.url){if(!K(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((o,i)=>{this.events.once("register_error",f=>{this.resetMaxListeners(),i(f)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return i(new Error("HTTP connection is missing or invalid"));o()})})}this.url=t,this.registering=!0;try{if(!this.disableProviderPing){const n=k({id:1,jsonrpc:"2.0",method:"test",params:[]});await X(t,ee(Y({},te),{body:n}))}this.onOpen()}catch(n){const o=this.parseError(n);throw this.events.emit("register_error",o),this.onClose(),o}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(t){if(typeof t.data>"u")return;const n=typeof t.data=="string"?Ie(t.data):t.data;this.events.emit("payload",n)}onError(t,n){const o=this.parseError(n),i=o.message||o.toString(),f=Ke(t,i);this.events.emit("payload",f)}parseError(t,n=this.url){return ke(t,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>re&&this.events.setMaxListeners(re)}}export{ht as E,Ie as a,_t as b,mt as c,Ge as d,he as e,pt as f,dt as g,wt as h,rt as i,Ke as j,Et as k,yt as l,tt as m,ye as n,Rt as o,ke as p,vt as q,gt as r,k as s};
